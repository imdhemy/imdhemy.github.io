<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>We need more tests</title>
    <meta name="description"
          content="Well, It‚Äôs not about Coronavirus pandemic this time üò∑. Mois√©s Belch√≠n Mart√≠nez (Moi), my awesome ex-CTO, keeps repeating these words in every PR ‚ÄúWe need mor...">
    <link rel="canonical" href="https://imdhemy.com/blog/testing/we-need-more-tests.html/">
    <link rel="stylesheet" href="/assets/css/main.css?v=1.0.0">
    
    <link rel="icon" type="image/png" href="/assets/theme/favicon.png">
    
    
    <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
    },
    svg: {
      fontCache: 'global',
    },
  };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    

    
    <!-- Facebook Meta Tags -->
<meta property="og:title" content="We need more tests">
<meta property="og:type" content="article">
<meta property="og:image" content="https://imdhemy.com">
<meta property="og:url" content="https://imdhemy.com/blog/testing/we-need-more-tests.html/">
<meta property="og:description"
      content="Well, It‚Äôs not about Coronavirus pandemic this time üò∑. Mois√©s Belch√≠n Mart√≠nez (Moi), my awesome ex-CTO, keeps repeating these words in every PR ‚ÄúWe need mor...">
<meta property="og:site_name" content="Imdhemy">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="We need more tests">
<meta name="twitter:description"
      content="Well, It‚Äôs not about Coronavirus pandemic this time üò∑. Mois√©s Belch√≠n Mart√≠nez (Moi), my awesome ex-CTO, keeps repeating these words in every PR ‚ÄúWe need mor...">
<meta name="twitter:image" content="https://imdhemy.com">


    

</head>
<body class="min-h-screen">
<div class="min-h-screen">
    <header class="relative" id="main-header">
    <div class="container mx-auto">
        <div class="flex py-6 lg:py-14 p-5 lg:px-0">
            <!-- begin logo -->
            <div class="flex-auto">
                <div>
                    <a href="/" class="text-gray-900 text-3xl font-bold">
                        Imdhemy
                    </a>
                </div>
            </div>
            <!-- end logo -->
            <!-- begin right part -->
            <div class="flex-auto">
                <div class="flex justify-end lg:hidden">
                    <button type="button" class="menu-toggle" data-target="#mobile-nav">
                        <ion-icon name="menu-outline"></ion-icon>
                    </button>
                </div>

                <div class="hidden lg:flex justify-end">
                    <ul class="flex items-center">
                        
                        <li class="ml-10">
                            <a href="/"
                               class="text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                Home
                            </a>
                        </li>
                        
                        <li class="ml-10">
                            <a href="/blog"
                               class="text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                Blog
                            </a>
                        </li>
                        
                        <li class="ml-10">
                            <a href="/about"
                               class="text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                About
                            </a>
                        </li>
                        
                    </ul>
                </div>
                <!-- end right part -->
            </div>
            <!-- begin mobile nav -->
            <nav id="mobile-nav"
                 class="menu -z-10 opacity-0 absolute top-32 right-6 block min-w-fit w-40 bg-white p-5 rounded-md shadow-md ease-linear">
                <div class="ml-auto">
                    <ul class="p-0 m-0 flex-column items-center">
                        
                        <li class="block flex-1 w-full m-0">
                            <a href="/"
                               class="block text-right text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                Home
                            </a>
                        </li>
                        
                        <li class="block flex-1 w-full m-0">
                            <a href="/blog"
                               class="block text-right text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                Blog
                            </a>
                        </li>
                        
                        <li class="block flex-1 w-full m-0">
                            <a href="/about"
                               class="block text-right text-base font-semibold p-2 text-gray-900 ease-linear hover:text-blue-600 active:text-blue-600">
                                About
                            </a>
                        </li>
                        
                    </ul>
                </div>
            </nav>
            <!-- end mobile nav -->
        </div>
    </div>
</header>

    <main>
        <div class="max-w-screen-lg mx-auto bg-white p-5">
    <h1 class="font-black font-sans text-2xl lg:text-7xl post-title">We need more tests</h1>
</div>

<div class="max-w-screen-md mx-auto bg-white p-5">
    <div class="flex justify-between flex-wrap my-2">
        <div class="flex items-center mr-8">
            <img src="/theme/images/avatar.jpeg" alt=""
                 class="rounded-full w-10 h-10 mr-3 block"/>
            <div>
                <p class="text-gray-700 text-sm font-bold">Dhemy</p>
                <p class="text-gray-500 text-xs">
                    January 31, 2022 - 5 min read
                </p>
            </div>
        </div>
    </div>

    <div>
        
        <div class="flex mb-5">
    
</div>

    </div>

    
</div>


<div class="max-w-screen-md mx-auto bg-white p-5 text-xl content">
    <p>Well, It‚Äôs not about Coronavirus pandemic this time üò∑. <a href="https://moisesbm.wordpress.com/">Mois√©s Belch√≠n Mart√≠nez</a> (Moi),
my awesome ex-CTO, keeps repeating these words in every PR <strong>‚ÄúWe need more tests‚Äù</strong>. Sometimes it appears as a joke
about Covid-19, but I believe he totally meant it.</p>

<p>There‚Äôs a reason for optimism about your own code because you wrote it, it works, and you did your best following the
best practices of clean code, but is that enough to merge and release this code? TBH, No!</p>

<p>Moi doesn‚Äôt mean the quantity, but actually he meant the quality of tests we wrote to avoid
the <a href="https://www.atlassian.com/agile/software-development/technical-debt">technical debt</a> as much as possible by
having <a href="https://www.linkedin.com/feed/update/urn:li:activity:6886937179793223680?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6886937179793223680%2C6888937049659854849%29">a strict definition of Done</a>.
In this article, I‚Äôm discussing the metrics of code coverage, are they reliable enough? de we really need more tests?
How to measure a test suite quality? Vamos!</p>

<h2 id="what-is-the-goal-of-unit-testing">What is the goal of unit testing?</h2>

<p>A simple question, yet one that must be addressed! The goal of unit testing is to allow <strong>sustainable growth</strong> of the
software project. When you start a new project, you make progress so quickly, and get results with a little slaps on
your keyboard. No bad architectural decisions have been made yet. No requirement changes or existing code to worry
about. Actually, nothing is dragging you back. Eventually, the development speed slows down, and adding a new feature
may break another.</p>

<p>As per wikipedia, the idea that software eventually rots as it is changed is called <strong>Software entropy</strong>. Any code
modification leads to an amount of disorder in your code base. Leaving entropy without proper care, such as constant
cleaning and refactoring, the system becomes increasingly complex and disorganized.</p>

<p>Software entropy is tied to the notion of change and has no meaning in a static system. If there is no intent to alter
the system, we cannot speak of its entropy. One more idea to put in mind, when software entropy overwhelms a project,
the project freezes!</p>

<p>Tests act as a safety net. Tests help make sure the existing functionality works, even after you introduce new features
or refactor the code to better fit new requirements. Besides, it helps have a well-designed software.</p>

<h2 id="dont-just-throw-more-tests">Don‚Äôt just throw more tests</h2>

<p>Not all tests are created equal. Some of them are valuable and contribute a lot to overall software quality. Others
don‚Äôt. You can‚Äôt achieve the goal of unit testing by just throwing more tests at the project. Let‚Äôs discuss the *
*QUANTITY** aspect.</p>

<p><strong>Coverage metrics</strong> are used to show how much source code tests execute. It gives you a percentage from <code class="language-plaintext highlighter-rouge">0%</code> (No source
code executed) to <code class="language-plaintext highlighter-rouge">100%</code> (It covers all lines of code).</p>

<p>If a metric shows that is there too little coverage in your code base, say, only <code class="language-plaintext highlighter-rouge">10%</code>. That‚Äôs a good indication that
you are not testing enough. But the reverse isn‚Äôt true: even <code class="language-plaintext highlighter-rouge">100%</code> coverage isn‚Äôt a guarantee that you have a
good-quality test suite. A test suite that provides high coverage can still be of poor quality.</p>

<p>Consider the following example, using the code coverage as a metric.</p>

<p><strong>Read the code comments:</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="n">bool</span> <span class="nf">isBig</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">)</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Not covered with test</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// The following test calls the `isBig()` function. </span>
<span class="c1">// The if condition evaluates to `false`, then it returns false.</span>
<span class="c1">// This code executes (4) lines out of total (5) lines of code.</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">Test</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">bool</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">isBig</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    <span class="nc">Assertions</span><span class="o">.</span><span class="na">AssertFalse</span><span class="o">(</span><span class="n">actual</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>With a simple calculation using the code coverage formula:</p>

\[Code\ coverage = \frac{Lines\ of\ code\ executed}{Total\ number\ of\ lines}\]

\[Code\ coverage = \frac{4}{5} = 0.8 = 80\%\]

<p>Now, with the same test, what if we refactored our function to remove the unnecessary if condition:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">bool</span> <span class="nf">isBig</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>When running our test again, it executes the full lines of code with <code class="language-plaintext highlighter-rouge">100%</code> coverage! The test still verifies the same
number of possible outcomes and without any improvement to our test suite, the test coverage percentage raised
from <code class="language-plaintext highlighter-rouge">80%</code> to <code class="language-plaintext highlighter-rouge">100%</code>.</p>

<p class="note">
Having a low test coverage is an indication of a bad test suite, but having a high number tells nothing about the <strong>QUALITY</strong> of the test suite.
</p>

<p>To enable sustainable project growth, you have to focus on high quality tests. Those are the only type of tests that are
worth keeping in the test suite.</p>

<h2 id="how-to-measure-a-test-suite-quality">How to measure a test suite quality?</h2>

<p>The only reliable way to measure a test suite quality is to evaluate each test individually. The point is there is no
automated way to see how good your test suite. You have to apply your personal judgement.</p>

<p>The only point in having automated tests is if you constantly use them. All tests should be integrated into the
development cycle, you should execute them on every change, even the smallest one.</p>

<p>It‚Äôs important to direct your unit testing efforts to the most critical parts of the system and verify the others only
briefly or indirectly. In most applications, the most important part is the part that contains the business logic (The
Domain Model).</p>

<h2 id="whats-next">What‚Äôs next?</h2>

<p>The only way to achieve the goal of unit testing is to learn how to differentiate between a good and a bad test, and you
should be able to refactor the test to make it more valuable.</p>

<p>I‚Äôll discuss testing more and more in the next articles. This series of articles are inspired by a list of books and
courses including:</p>

<ul>
  <li>TDD Tutorial by Laracasts.</li>
  <li>Unit testing Principles, Practices and Patterns.</li>
  <li>Effective Unit Testing, a guide for java developers.</li>
</ul>

<p><strong>Mant√©nganse al tanto</strong></p>

</div>


    </main>
    <section class="sticky top-[100vh]">
    <div class="p-10">
        <div class="max-w-screen-md mx-auto">
            <p class="text-center">
                <!-- 2001 - jekyll current year -->
                &copy; 2021 - 2024 . imdhemy.com Published by Jekyll, hosted on GitHub Pages.
            </p>
        </div>
    </div>
</section>

</div>


<!-- Ion icons -->
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

<!-- Main JS file -->
<script src="/assets/js/dist/main.js?v=1.0.0"></script>
</body>
</html>
